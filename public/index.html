<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>‚öΩüî• ALERTA DO MELHOR</title>
  <style>
    :root {
      --primary: #1976d2;
      --accent: #0d47a1;
      --danger: #f44336;
      --card: #fff;
      --bg-color: #0f1720;
    }
    html,body { height:100%; margin:0; }
    body {
      font-family: Inter, Arial, sans-serif;
      background-color: var(--bg-color);
      color: #f3f4f6;
      min-height:100%;
      display:flex;
      align-items:stretch;
      justify-content:center;
    }
    .bg {
      position:fixed;
      inset:0;
      background-image: url("https://source.unsplash.com/1600x900/?maracana,stadium");
      background-size:cover;
      background-position:center;
      background-attachment:fixed;
      filter: saturate(0.95) contrast(0.9) brightness(0.55);
      z-index: -2;
      transition: background-image 400ms ease-in-out, filter 300ms;
    }
    .bg::after {
      content:'';
      position:absolute; inset:0;
      background: linear-gradient(180deg, rgba(0,0,0,0.25), rgba(0,0,0,0.6));
      z-index:-1;
    }
    .container {
      width:100%;
      max-width:1100px;
      margin:32px;
      background: linear-gradient(180deg, rgba(255,255,255,0.04), rgba(255,255,255,0.03));
      border-radius:12px;
      padding:18px;
      box-shadow: 0 8px 30px rgba(2,6,23,0.55);
      backdrop-filter: blur(6px);
    }

    h2 { color: #fff; text-align:center; margin:0 0 8px 0; font-size:1.4rem; letter-spacing:0.6px; }
    .tabs { display:flex; gap:8px; justify-content:center; margin-bottom:12px; }
    .tab { padding:10px 16px; background: rgba(255,255,255,0.06); border:none; cursor:pointer; font-weight:700; border-radius:8px; color:#fff; }
    .tab.active { background: var(--primary); color: #fff; }
    .controls { text-align:center; margin: 12px 0; display:flex; gap:8px; justify-content:center; flex-wrap:wrap; }
    button { padding:8px 14px; border:none; border-radius:8px; cursor:pointer; font-weight:700; }
    #btn-update { background: var(--primary); color: #fff; }
    #btn-clear { background: var(--danger); color: #fff; }
    .panel { background: rgba(255,255,255,0.03); padding:14px; border-radius:12px; margin:12px 0; }
    .grid { display:grid; grid-template-columns: 1fr 1fr; gap:12px; }
    label { display:block; font-size:0.9rem; margin-bottom:6px; color:#e6eef8; font-weight:600; }
    input[type="number"], select, input[type="text"] { width:100%; padding:8px 10px; border-radius:8px; border:1px solid rgba(255,255,255,0.06); background:transparent; color:#fff; }
    .small { font-size:0.9rem; color:#dbeafe; }
    .muted { color:#cfe7ff; font-size:0.9rem; }
    .match, .game { background: rgba(255,255,255,0.02); margin:8px 0; padding:12px; border-radius:10px; }
    #status { text-align:center; color: var(--danger); font-weight:700; min-height:22px; }
    .no-data { text-align:center; color:#cbd5e1; padding:20px; }
    .settings-row { display:flex; gap:8px; align-items:center; }
    .preset-list { display:flex; gap:8px; flex-wrap:wrap; margin-top:8px; }
    .pill { background: rgba(255,255,255,0.06); padding:6px 10px; border-radius:999px; cursor:pointer; font-weight:600; color:#fff; }
    .meta { text-align:center; color:#e2eefc; margin-top:8px; font-size:0.9rem; }

    .bg-controls { display:flex; gap:8px; align-items:center; flex-wrap:wrap; margin-top:8px; }
    .thumb { width:120px; height:70px; border-radius:8px; background-size:cover; background-position:center; border:2px solid rgba(255,255,255,0.06); cursor:pointer; }
    .file-input { display:none; }
    .center { text-align:center; }

    @media (max-width:800px) {
      .grid { grid-template-columns: 1fr; }
      .thumb { width:100px; height:60px; }
    }
  </style>
</head>
<body>
  <div class="bg" id="bg"></div>

  <div class="container">
    <h2>‚öΩüî• ALERTA DO MELHOR</h2>

    <div class="tabs">
      <button class="tab active" onclick="showTab('chutes')">3+ Chutes (1¬∫ Tempo)</button>
      <button class="tab" onclick="showTab('over25')">Over 2.5 (2¬∫ Tempo)</button>
      <button class="tab" onclick="showTab('settings')">‚öôÔ∏è Configura√ß√µes</button>
    </div>

    <div class="controls">
      <button id="btn-update" onclick="fetchAllLiveGames()">Atualizar Agora</button>
      <button id="btn-clear" onclick="clearAllResults()">Zerar Resultados</button>
    </div>

    <div id="status"></div>
    <div class="meta" id="last-update">√öltima atualiza√ß√£o: nunca</div>

    <div id="chutes-content" class="panel tab-content active">
      <h3>‚öΩ 3+ Chutes no Gol ‚Äì 1¬∫ Tempo</h3>
      <div id="rule-summary-chutes" class="muted"></div>
      <div id="games"></div>
    </div>

    <div id="over25-content" class="panel tab-content">
      <h3>üî• Over 2.5 ‚Äì 2¬∫ Tempo</h3>
      <div id="rule-summary-over25" class="muted"></div>
      <div id="matches"></div>
    </div>

    <div id="settings-content" class="panel tab-content">
      <h3>‚öôÔ∏è Apar√™ncia ‚Äî Imagem de Fundo</h3>

      <div class="grid">
        <div>
          <label>Escolher imagem local (upload)</label>
          <div class="bg-controls">
            <label class="pill center" for="bg-file">Escolher arquivo...</label>
            <input id="bg-file" class="file-input" type="file" accept="image/*" />
            <button onclick="resetBackground()">Restaurar padr√£o</button>
          </div>

          <div style="height:10px"></div>

          <label>Presets (Unsplash)</label>
          <div class="bg-controls">
            <div class="thumb" id="thumb1" title="Maracan√£ - preset" onclick="setBgUrl('https://source.unsplash.com/1600x900/?maracana,stadium')"></div>
            <div class="thumb" id="thumb2" title="Torcida Flamengo - preset" onclick="setBgUrl('https://source.unsplash.com/1600x900/?flamengo,torcida,stadium')"></div>
            <div class="thumb" id="thumb3" title="Noite de jogo - preset" onclick="setBgUrl('https://source.unsplash.com/1600x900/?football,stadium,night')"></div>
          </div>

          <div style="height:12px"></div>
          <label>Op√ß√µes de visual</label>
          <div class="settings-row">
            <label><input id="bg-blur" type="checkbox" /> Efeito blur leve</label>
            <label style="margin-left:12px;"><input id="bg-dim" type="checkbox" checked /> Escurecer fundo</label>
          </div>
        </div>

        <div>
          <label>Preview / A√ß√µes</label>
          <div class="muted">Voc√™ pode enviar imagens pr√≥prias para public/images/ (servidas pelo servidor) ou usar upload local (n√£o enviado ao servidor).</div>

          <div style="height:10px"></div>
          <div class="row" style="margin-top:10px;">
            <button onclick="applyBgChoice()">Aplicar imagem atual</button>
            <button onclick="saveBgChoice()">Salvar como padr√£o no navegador</button>
          </div>

          <div style="height:12px"></div>
          <label>Imagem atual</label>
          <div id="current-bg" class="thumb" style="width:100%; height:160px;"></div>
          <div style="height:8px"></div>
          <div class="muted">Dica: para usar uma imagem do servidor, coloque em public/images/ e chame por /images/seu-arquivo.jpg (ex: /images/maracana-flamengo.jpg)</div>
        </div>
      </div>
    </div>

  </div>

  <audio id="alert-sound" preload="auto">
    <source src="https://assets.mixkit.co/sfx/preview/mixkit-message-pop-alert-2354.mp3" type="audio/mpeg">
  </audio>

  <script>
    const API_BASE = '';

    // --- Background logic ---
    const bgEl = document.getElementById('bg');
    const currentBgThumb = document.getElementById('current-bg');
    const thumb1 = document.getElementById('thumb1');
    const thumb2 = document.getElementById('thumb2');
    const thumb3 = document.getElementById('thumb3');

    const PRESETS = [
      'https://source.unsplash.com/1600x900/?maracana,stadium',
      'https://source.unsplash.com/1600x900/?flamengo,torcida,stadium',
      'https://source.unsplash.com/1600x900/?football,stadium,night'
    ];

    thumb1.style.backgroundImage = `url("${PRESETS[0]}")`;
    thumb2.style.backgroundImage = `url("${PRESETS[1]}")`;
    thumb3.style.backgroundImage = `url("${PRESETS[2]}")`;

    let bgState = {
      url: getSavedBg() || PRESETS[0],
      blur: false,
      dim: true
    };

    function initBackgroundUI() {
      bgEl.style.backgroundImage = `url("${bgState.url}")`;
      currentBgThumb.style.backgroundImage = `url("${bgState.url}")`;
      document.getElementById('bg-blur').checked = bgState.blur;
      document.getElementById('bg-dim').checked = bgState.dim;
      applyVisualOptions();
    }

    function setBgUrl(url) {
      bgState.url = url;
      bgEl.style.backgroundImage = `url("${url}")`;
      currentBgThumb.style.backgroundImage = `url("${url}")`;
    }

    document.getElementById('bg-file').addEventListener('change', (e) => {
      const f = e.target.files && e.target.files[0];
      if (!f) return;
      const reader = new FileReader();
      reader.onload = () => {
        bgState.url = reader.result;
        bgEl.style.backgroundImage = `url("${bgState.url}")`;
        currentBgThumb.style.backgroundImage = `url("${bgState.url}")`;
      };
      reader.readAsDataURL(f);
    });

    document.getElementById('bg-blur').addEventListener('change', () => {
      bgState.blur = document.getElementById('bg-blur').checked;
      applyVisualOptions();
    });
    document.getElementById('bg-dim').addEventListener('change', () => {
      bgState.dim = document.getElementById('bg-dim').checked;
      applyVisualOptions();
    });

    function applyVisualOptions() {
      const blur = bgState.blur ? 'blur(2px)' : 'none';
      let filter = `saturate(0.95) contrast(0.9) brightness(${bgState.dim ? '0.5' : '0.75'}) ${blur}`;
      bgEl.style.filter = filter;
    }

    function resetBackground() {
      bgState.url = PRESETS[0];
      setBgUrl(bgState.url);
      applyVisualOptions();
      localStorage.removeItem('alertBg');
    }

    function applyBgChoice() {
      setBgUrl(bgState.url);
      status('Imagem aplicada localmente.');
    }

    function saveBgChoice() {
      localStorage.setItem('alertBg', JSON.stringify(bgState));
      status('Imagem salva como padr√£o no navegador.');
    }

    function getSavedBg() {
      const raw = localStorage.getItem('alertBg');
      if (!raw) return null;
      try {
        const parsed = JSON.parse(raw);
        if (parsed && parsed.url) {
          bgState.blur = parsed.blur || false;
          bgState.dim = (parsed.dim === undefined) ? true : parsed.dim;
          return parsed.url;
        }
      } catch (e) { return null; }
      return null;
    }

    // UI tabs and small helpers
    function showTab(name) {
      document.querySelectorAll('.tab').forEach((t)=>t.classList.remove('active'));
      document.querySelectorAll('.tab-content').forEach((c)=>c.classList.remove('active'));
      if (name === 'chutes') document.querySelector('.tab:nth-child(1)').classList.add('active'), document.getElementById('chutes-content').classList.add('active');
      if (name === 'over25') document.querySelector('.tab:nth-child(2)').classList.add('active'), document.getElementById('over25-content').classList.add('active');
      if (name === 'settings') document.querySelector('.tab:nth-child(3)').classList.add('active'), document.getElementById('settings-content').classList.add('active');
    }

    function status(text, timeout = 2000) {
      const s = document.getElementById('status');
      s.textContent = text;
      if (timeout) setTimeout(()=> s.textContent = '', timeout);
    }

    initBackgroundUI();

    // NOTE: L√≥gica de regras e fetch foi omitida nesta vers√£o resumida do frontend.
    // Quando confirmar o PR eu incluo a vers√£o completa do frontend com regras din√¢micas (j√° discutida).
  </script>
</body>
</html>
